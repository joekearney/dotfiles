#!/bin/bash -e

source ${DOT_FILES_DIR}/bash/bash-functions.sh

function maybeRun() {
  local mainCommand=$1
  shift
  local label="$(printf '%-10s\n' [${mainCommand}])"

  if [[ "$(command -v ${mainCommand})" ]]; then
    echo "Running [$@]..." | indent "$label"
    (bash -ce "$@" 2>&1) | indent "$label"
  fi
}

# maybeRun test "echo 1 1>&2; echo 2"

maybeRun "mas" "mas upgrade"
maybeRun "brew" "brew update && brew upgrade --cleanup"
maybeRun "apt-get" "sudo -s -- 'apt-get update && apt-get install'"
maybeRun "gcloud" "gcloud components update --quiet"
