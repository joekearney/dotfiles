#!/bin/bash

TEMPLATE=$(dirname $0)/build.sbt.template

function runSbt() {
  PROJECT_DIR="$HOME/.sbt-repl"

  mkdir -p $PROJECT_DIR
  cd $PROJECT_DIR

  # copy template build.sbt, overwriting if exists
  cp $TEMPLATE ./build.sbt

  export SBT_OPTS="-Xmx512M -XX:+UseG1GC -XX:+CMSClassUnloadingEnabled"
  sbt console-quick
}

if [[ "$1" == add ]]; then
  echo -n "Paste the new line for build.sbt here: "
  read line
  echo "$line" >> $TEMPLATE
else
  runSbt
fi
